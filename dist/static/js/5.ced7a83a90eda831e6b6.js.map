{"version":3,"sources":["webpack:///src/page/column/add.vue","webpack:///./src/page/column/add.vue?0dcc","webpack:///./src/page/column/add.vue"],"names":["add","name","components","data","uploadUrl","fileKey","downloadUrl","yanType","tips","enter","imageKey","typeIds","model","onDate","bombName","options","value","label","created","this","$router","currentRoute","query","mounted","JSON","parse","localStorage","getItem","init","methods","_this","Object","colum","pageIndex","pageSize","isVisible","sessionId","then","res","bussData","param2","id","console","log","imageUrl","length","split","forEach","item","item2","isChoose","choose","index","$forceUpdate","rewriteUpload","content","_this2","http","put","file","headers","Content-Type","type","handleAvatarSuccess","beforeAvatarUpload","_this3","size","promise_default","a","resolve","reject","$message","error","submit","arr","filter","map","join","addName","upDateName","message","_this4","param","push","path","_this5","column_add","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","separator","separator-class","_v","_s","staticStyle","line-height","placeholder","callback","$$v","expression","_l","key","style","background","on","click","$event","action","http-request","show-file-list","on-success","before-upload","src","plain","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.ced7a83a90eda831e6b6.js","sourcesContent":["<template>\r\n\t<div class=\"columAdd\">\r\n\t\t<div class=\"w-100 h-100 p-15\">\r\n\t\t\t<el-breadcrumb separator=\"/\" separator-class=\"el-icon-arrow-right\" class=\"p-15 b-b-f0\">\r\n\t\t\t\t<el-breadcrumb-item>设备管理》{{tips == 'add'?'新增':'编辑'}}</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t\t<div class=\"w-100 p-15\">\r\n\t\t\t\t<ul class=\"wrap\">\r\n\t\t\t\t\t<li class=\"flex\">\r\n\t\t\t\t\t\t<em class=\"nowrap\" style=\"line-height: 40px;\">设备型号：</em>\r\n\t\t\t\t\t\t<el-input v-model=\"model\" placeholder=\"请输入\"></el-input>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li class=\"flex\">\r\n\t\t\t\t\t\t<em class=\"nowrap\" style=\"line-height: 40px;\">烟弹类型：</em>\r\n\t\t\t\t\t\t<el-select v-model=\"bombName\" placeholder=\"请选择\">\r\n\t\t\t\t\t\t\t<el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n\t\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li class=\"flex\">\r\n\t\t\t\t\t\t<em class=\"nowrap\" style=\"line-height: 40px;\">上市日期：</em>\r\n\t\t\t\t\t\t<el-date-picker\r\n\t\t\t\t\t\t  v-model=\"onDate\"\r\n\t\t\t\t\t\t  type=\"date\"\r\n\t\t\t\t\t\t  placeholder=\"选择日期\">\r\n\t\t\t\t\t\t</el-date-picker>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li class=\"flex\">\r\n\t\t\t\t\t\t<em class=\"nowrap\" style=\"line-height: 40px;\">支持烟型：</em>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span :style=\"{background:item.isChoose?'#fff':'#bbb'}\" class=\"typeBtn\" v-for=\"(item,index) in yanType\" @click=\"choose(item,index)\">{{item.name}}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li class=\"flex\">\r\n\t\t\t\t\t\t<em class=\"nowrap\" style=\"line-height: 40px;\">设备照片：</em>\r\n\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t\taction\r\n\t\t\t\t\t\t  class=\"avatar-uploader\"\r\n\t\t\t\t\t\t  :http-request=\"rewriteUpload\"\r\n\t\t\t\t\t\t  :show-file-list=\"false\"\r\n\t\t\t\t\t\t  :on-success=\"handleAvatarSuccess\"\r\n\t\t\t\t\t\t  :before-upload=\"beforeAvatarUpload\">\r\n\t\t\t\t\t\t  <img v-if=\"imageKey\" :src=\"imageKey\" class=\"avatar\">\r\n\t\t\t\t\t\t  <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<div class=\"footer\">\r\n\t\t\t\t\t<el-button plain @click=\"submit\">确定</el-button>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n \r\n<script>\r\n\timport service from '@/request/http.js'\r\n\timport {columAdd,getOSSUploadUrl,columType,columUpdate,columDetail} from '@/api/colum'\r\n\texport default {\r\n\t\tname: \"columnAdd\",\r\n\t\tcomponents: {\r\n\t\t\t\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuploadUrl:'',// 上传图片链接\r\n\t\t\t\tfileKey:'',// 图片key\r\n\t\t\t\tdownloadUrl:'',// 图片下载链接\r\n\t\t\t\tyanType:[],\r\n\t\t\t\ttips:'',//\r\n\t\t\t\tenter:{},\r\n\t\t\t\timageKey: '',  // 图片\r\n\t\t\t\ttypeIds:'',  // 支持的烟型 用,号隔开\r\n\t\t\t\tmodel:'',// 设备型号\r\n\t\t\t\tonDate:'',// 上市日期\r\n\t\t\t\tbombName:'',// 烟弹类型\r\n\t\t\t\toptions: [{\r\n\t\t\t\t\t\tvalue: 'kao',\r\n\t\t\t\t\t\tlabel: '烤烟型'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue: 'you',\r\n\t\t\t\t\t\tlabel: '油烟型'\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.tips = this.$router.currentRoute.query.tips\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.enter = JSON.parse(localStorage.getItem(\"enter\"));\r\n\t\t\tthis.init()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit(){\r\n\t\t\t\tconst param = {\r\n\t\t\t\t\t  \"pageIndex\": 1,\r\n\t\t\t\t\t  \"pageSize\": 1000,\r\n\t\t\t\t\t  \"isVisible\":'y'\r\n\t\t\t\t}\r\n\t\t\t\tcolumType(param,this.enter.sessionId).then((res)=>{\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.yanType = res.bussData;\r\n\t\t\t\t\tif(!this.tips){\r\n\t\t\t\t\t\tconst param2 = {\r\n\t\t\t\t\t\t\t  id:this.$router.currentRoute.query.id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcolumDetail(param2,this.enter.sessionId).then((res)=>{\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.bombName = res.bussData.bombName;\r\n\t\t\t\t\t\t\tthis.fileKey = res.bussData.imageKey;\r\n\t\t\t\t\t\t\tthis.imageKey = res.bussData.imageUrl;\r\n\t\t\t\t\t\t\tthis.model = res.bussData.model;\r\n\t\t\t\t\t\t\tthis.onDate = res.bussData.onDate;\r\n\t\t\t\t\t\t\tthis.typeIds = res.bussData.typeIds;\r\n\t\t\t\t\t\t\tif(this.yanType.length>0 && this.typeIds){\r\n\t\t\t\t\t\t\t\tlet typeIds = this.typeIds.split(',');\r\n\t\t\t\t\t\t\t\tthis.yanType.forEach((item)=>{\r\n\t\t\t\t\t\t\t\t\ttypeIds.forEach((item2)=>{\r\n\t\t\t\t\t\t\t\t\t\tif(item.id == item2){\r\n\t\t\t\t\t\t\t\t\t\t\titem.isChoose = 1;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconsole.log(this.imageKey)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tchoose(item,index){  // 选择烟型\r\n\t\t\t\tif(this.yanType[index].isChoose){\r\n\t\t\t\t\tdelete this.yanType[index].isChoose\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.yanType[index].isChoose = 1;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.$forceUpdate()\r\n\t\t\t},\r\n\t\t\trewriteUpload(content) {  // 自定义请求头\r\n\t\t\t\tconsole.log(content)\r\n\t\t\t  service.put(this.uploadUrl, content.file, {\r\n\t\t\t    headers: {\r\n\t\t\t      'Content-Type': content.file.type,\r\n\t\t\t    }\r\n\t\t\t  }).then(() => {\r\n\t\t\t    this.imageKey = this.downloadUrl; //显示图片\r\n\t\t\t  })\r\n\t\t\t},\r\n\t\t\thandleAvatarSuccess(res, file) {\r\n\t\t\t\tconsole.log(res,file)\r\n\t\t\t},\r\n\t\t\t//上传前,一些装备工作\r\n\t\t\tbeforeAvatarUpload(file) {\r\n\t\t\t  console.log(file)\r\n\t\t\t  const isLt2M = file.size / 1024 / 1024 < 2;\r\n\t\t\t  if (!isLt2M) {\r\n\t\t\t    this.$message.error('上传头像图片大小不能超过 2MB!');\r\n\t\t\t    return false;\r\n\t\t\t  }\r\n\t\t\t  \r\n\t\t\t  return new Promise((resolve, reject) => {\r\n\t\t\t    console.log(file.name.split('.')[1],file.type);\r\n\t\t\t\tgetOSSUploadUrl(file.name.split('.')[1],file.type).then((res)=>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tthis.uploadUrl = res.bussData.uploadUrl\r\n\t\t\t\t\tthis.fileKey = res.bussData.fileKey\r\n\t\t\t\t\tthis.downloadUrl = res.bussData.downloadUrl\r\n\t\t\t\t\tresolve(res)\r\n\t\t\t\t})\r\n\t\t\t  })\r\n\t\t\t},\r\n\t\t\tsubmit(){  // 提交\r\n\t\t\t\tif(!this.model){\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t  message: '请输入设备型号',\r\n\t\t\t\t\t  type: 'warning'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(!this.bombName ){\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t  message: '请选择烟弹类型',\r\n\t\t\t\t\t  type: 'warning'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(!this.onDate){\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t  message: '请选择上市日期',\r\n\t\t\t\t\t  type: 'warning'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet arr = this.yanType.filter((item)=>{\r\n\t\t\t\t\treturn item.isChoose\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(arr)\r\n\t\t\t\tif(arr){\r\n\t\t\t\t\tarr = arr.map((item)=>{\r\n\t\t\t\t\t\treturn item.id\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.typeIds = arr.join(',')\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(this.typeIds)\r\n\t\t\t\tif(!this.typeIds){\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t  message: '请选择支持烟型',\r\n\t\t\t\t\t  type: 'warning'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(!this.fileKey){\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t  message: '请上传图片',\r\n\t\t\t\t\t  type: 'warning'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(this.tips){  // 新增\r\n\t\t\t\t\tthis.addName()\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.upDateName()\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\taddName(){  // 新增\r\n\t\t\t\tconst param = {\r\n\t\t\t\t\t  \"bombName\": this.bombName,\r\n\t\t\t\t\t  \"imageKey\": this.fileKey,\r\n\t\t\t\t\t  \"model\": this.model,\r\n\t\t\t\t\t  \"onDate\": this.onDate,\r\n\t\t\t\t\t  \"typeIds\": this.typeIds\r\n\t\t\t\t\t}\r\n\t\t\t\tcolumAdd(param,this.enter.sessionId).then((res)=>{\r\n\t\t\t\t\tif(!res)return\r\n\t\t\t\t\tthis.$router.push({path:'/column/column'})\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tupDateName(){  // 编辑\r\n\t\t\t\tconst param = {\r\n\t\t\t\t\t\"id\": this.$router.currentRoute.query.id,\r\n\t\t\t\t\t\"bombName\": this.bombName,\r\n\t\t\t\t\t\"imageKey\": this.fileKey,\r\n\t\t\t\t\t\"model\": this.model,\r\n\t\t\t\t\t\"onDate\": this.onDate,\r\n\t\t\t\t\t\"typeIds\": this.typeIds\r\n\t\t\t\t}\r\n\t\t\t\tcolumUpdate(param,this.enter.sessionId).then((res)=>{\r\n\t\t\t\t\tconsole.log(res.bussData.uploadUrl)\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t  message: '设备更改成功',\r\n\t\t\t\t\t  type: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.$router.push({path:'/column/column'})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n<style lang=\"less\">\r\n\t.columAdd{\r\n\t\tpadding-bottom:50px;\r\n\t\t.wrap{\r\n\t\t\t\tmax-width: 500px;\r\n\t\t\t\tli{\r\n\t\t\t\t\tmargin-top: 40px;\r\n\t\t\t\t\tem{\r\n\t\t\t\t\t\tmargin-right: 30px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.typeBtn{\r\n\t\t\t\tbackground: #bbb;\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tpadding: 5px 15px;\r\n\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t\tmargin-right: 10px;\r\n\t\t\t\tborder: 1px solid #bbb;\r\n\t\t\t}\r\n\t\t\t.footer{\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t\t// 图片样式\r\n\t\t\t.avatar-uploader .el-upload {\r\n\t\t\t\tborder: 1px dashed #999;\r\n\t\t\t\tborder-radius: 6px;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t  }\r\n\t\t.avatar-uploader .el-upload:hover {\r\n\t\t  border-color: #409EFF;\r\n\t\t}\r\n\t\t.avatar-uploader-icon {\r\n\t\t  font-size: 28px;\r\n\t\t  color: #8c939d;\r\n\t\t  width: 178px;\r\n\t\t  height: 178px;\r\n\t\t  line-height: 178px;\r\n\t\t  text-align: center;\r\n\t\t}\r\n\t\t.avatar {\r\n\t\t  width: 178px;\r\n\t\t  height: 178px;\r\n\t\t  display: block;\r\n\t\t}\r\n\t}\r\n\t.el-input{\r\n\t\twidth: 220px;\r\n\t}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/column/add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columAdd\"},[_c('div',{staticClass:\"w-100 h-100 p-15\"},[_c('el-breadcrumb',{staticClass:\"p-15 b-b-f0\",attrs:{\"separator\":\"/\",\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"设备管理》\"+_vm._s(_vm.tips == 'add'?'新增':'编辑'))])],1),_vm._v(\" \"),_c('div',{staticClass:\"w-100 p-15\"},[_c('ul',{staticClass:\"wrap\"},[_c('li',{staticClass:\"flex\"},[_c('em',{staticClass:\"nowrap\",staticStyle:{\"line-height\":\"40px\"}},[_vm._v(\"设备型号：\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(_vm.model),callback:function ($$v) {_vm.model=$$v},expression:\"model\"}})],1),_vm._v(\" \"),_c('li',{staticClass:\"flex\"},[_c('em',{staticClass:\"nowrap\",staticStyle:{\"line-height\":\"40px\"}},[_vm._v(\"烟弹类型：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.bombName),callback:function ($$v) {_vm.bombName=$$v},expression:\"bombName\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),_c('li',{staticClass:\"flex\"},[_c('em',{staticClass:\"nowrap\",staticStyle:{\"line-height\":\"40px\"}},[_vm._v(\"上市日期：\")]),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.onDate),callback:function ($$v) {_vm.onDate=$$v},expression:\"onDate\"}})],1),_vm._v(\" \"),_c('li',{staticClass:\"flex\"},[_c('em',{staticClass:\"nowrap\",staticStyle:{\"line-height\":\"40px\"}},[_vm._v(\"支持烟型：\")]),_vm._v(\" \"),_c('div',_vm._l((_vm.yanType),function(item,index){return _c('span',{staticClass:\"typeBtn\",style:({background:item.isChoose?'#fff':'#bbb'}),on:{\"click\":function($event){return _vm.choose(item,index)}}},[_vm._v(_vm._s(item.name))])}),0)]),_vm._v(\" \"),_c('li',{staticClass:\"flex\"},[_c('em',{staticClass:\"nowrap\",staticStyle:{\"line-height\":\"40px\"}},[_vm._v(\"设备照片：\")]),_vm._v(\" \"),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"http-request\":_vm.rewriteUpload,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.imageKey)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageKey}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('el-button',{attrs:{\"plain\":\"\"},on:{\"click\":_vm.submit}},[_vm._v(\"确定\")])],1)])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-cc17f28e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/column/add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"importLoaders\\\":20}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-cc17f28e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader!sass-resources-loader?{\\\"resources\\\":[\\\"G:\\\\\\\\项目\\\\\\\\工作项目\\\\\\\\cigarette\\\\\\\\src\\\\\\\\assets\\\\\\\\css\\\\\\\\public.less\\\"]}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./add.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cc17f28e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/column/add.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}