webpackJsonp([6],{"1Vxy":function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("2Wsv"),i=t("CgFE"),n=t("lq4Q"),r={name:"columnAdd",components:{},data:function(){return{userName:"",loginName:"",password2:"",password:"",images:"",avatorKey:"",tips:"",name:"",userNum:1,roleId:"",options:[]}},created:function(){this.tips=this.$router.currentRoute.query.tips},mounted:function(){this.enter=JSON.parse(localStorage.getItem("enter")),this.getList()},methods:{addUserNum:function(){this.userNum>=this.options.length?this.$message({message:"角色已达上限",type:"warning"}):this.userNum++},addName:function(){var e=this,s={avatorKey:this.avatorKey,loginName:this.loginName,password:this.password,roleId:this.roleId,userName:this.userName};Object(i.a)(s,this.enter.sessionId).then(function(s){console.log(s),e.$message({message:"用户新增成功",type:"success"}),e.$router.push({path:"/meeting/meetingList"})})},upDateName:function(){var e=this,s={id:this.$router.currentRoute.query.id,avatorKey:this.avatorKey,loginName:this.loginName,password:this.password,roleId:this.roleId,userName:this.userName};Object(i.f)(s,this.enter.sessionId).then(function(s){console.log(s.bussData.uploadUrl),e.$message({message:"用户更改成功",type:"success"}),e.$router.push({path:"/meeting/meetingList"})})},onFileChange:function(e){var s=e.target.files||e.dataTransfer.files;s.length&&this.createImage(s[0])},createImage:function(e){var s=this;Object(n.i)(e.name.split(".")[1],e.type).then(function(t){console.log(t),s.avatorKey=t.bussData.fileKey,a.a.put(t.bussData.uploadUrl,e,{headers:{"Content-Type":e.type}}).then(function(){s.images=t.bussData.downloadUrl})})},reduceNum:function(){this.userNum--},submit:function(){this.avatorKey?this.loginName?this.userName?this.password?this.password2?this.roleId?this.password==this.password2?this.tips?this.addName():this.upDateName():this.$message({message:"2次密码设置不同",type:"warning"}):this.$message({message:"请设置角色",type:"warning"}):this.$message({message:"请再次设置密码",type:"warning"}):this.$message({message:"请设置密码",type:"warning"}):this.$message({message:"请填写用户名",type:"warning"}):this.$message({message:"请填写账户",type:"warning"}):this.$message({message:"请上传图片",type:"warning"})},getList:function(){var e=this;if(Object(i.d)(this.enter.sessionId).then(function(s){console.log(s),e.options=s.bussData}),!this.tips){var s={id:this.$router.currentRoute.query.id};Object(i.c)(s,this.enter.sessionId).then(function(s){console.log(s),e.avatorKey=s.bussData.avatorKey,e.images=s.bussData.avatorUrl,e.loginName=s.bussData.loginName,e.roleId=s.bussData.roleId,e.userName=s.bussData.userName})}}}},o={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"columAdd"},[t("div",{staticClass:"w-100 h-100 p-15"},[t("el-breadcrumb",{staticClass:"p-15 b-b-f0",attrs:{separator:"/","separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[e._v("用户管理》"+e._s("add"==e.tips?"新增":"编辑"))])],1),e._v(" "),t("div",{staticClass:"w-100 p-15"},[t("ul",{staticClass:"wrap"},[t("li",{staticClass:"flex"},[t("em",{staticClass:"nowrap",staticStyle:{"line-height":"40px"}},[e._v("头像：")]),e._v(" "),t("div",{staticClass:"updateImg"},[e._v("\n\t\t\t\t\t\t点击更改\n\t\t\t\t\t\t"),e.images?t("img",{staticClass:"headImg",attrs:{src:e.images}}):e._e(),e._v(" "),t("input",{attrs:{type:"file"},on:{change:e.onFileChange}})])]),e._v(" "),t("li",{staticClass:"flex"},[t("em",{staticClass:"nowrap",staticStyle:{"line-height":"40px"}},[e._v("账号：")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.loginName,callback:function(s){e.loginName=s},expression:"loginName"}})],1),e._v(" "),t("li",{staticClass:"flex"},[t("em",{staticClass:"nowrap",staticStyle:{"line-height":"40px"}},[e._v("用户名：")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.userName,callback:function(s){e.userName=s},expression:"userName"}})],1),e._v(" "),t("li",{staticClass:"flex"},[t("em",{staticClass:"nowrap",staticStyle:{"line-height":"40px"}},[e._v("设置密码：")]),e._v(" "),t("el-input",{attrs:{type:"password",placeholder:"请输入"},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}})],1),e._v(" "),t("li",{staticClass:"flex"},[t("em",{staticClass:"nowrap",staticStyle:{"line-height":"40px"}},[e._v("重复密码：")]),e._v(" "),t("el-input",{attrs:{type:"password",placeholder:"请输入"},model:{value:e.password2,callback:function(s){e.password2=s},expression:"password2"}})],1),e._v(" "),t("li",{staticClass:"flex"},[t("em",{staticClass:"nowrap",staticStyle:{"line-height":"40px"}},[e._v("角色：")]),e._v(" "),t("div",e._l(e.userNum,function(s,a){return t("div",{staticClass:"userList"},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.roleId,callback:function(s){e.roleId=s},expression:"roleId "}},e._l(e.options,function(e){return t("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}),1)],1)}),0)])]),e._v(" "),t("div",{staticClass:"footer"},[t("el-button",{attrs:{plain:""},on:{click:e.submit}},[e._v("确定")])],1)])],1)])},staticRenderFns:[]};var l=t("VU/8")(r,o,!1,function(e){t("vMdE")},"data-v-619af9ae",null);s.default=l.exports},vMdE:function(e,s){}});
//# sourceMappingURL=6.a11e4a9d05f1c455243a.js.map