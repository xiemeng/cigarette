webpackJsonp([8],{"BlG/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("vMJZ"),o={name:"message",data:function(){return{total:0,totalsPage:0,data:{pageSize:10,currentPage:1},enter:{},isShowRank:!1,id:"",tableData:[]}},created:function(){},mounted:function(){this.enter=JSON.parse(localStorage.getItem("enter")),this.init(),this.getList()},methods:{change:function(t){console.log(t);var e={isShowRank:t?"y":"n",id:this.id};Object(a.b)(e,this.enter.sessionId).then(function(t){console.log(t)})},exportExcel:function(){var t=this,e={pageIndex:this.data.currentPage,pageSize:this.data.pageSize,monthDaysASC:!0,monthDaysDESC:!0,monthMouthASC:!0,monthMouthDESC:!0};Object(a.g)(e,this.enter.sessionId).then(function(e){console.log(e);t.fileDownload(e,"排行榜列表.xlsx")}).catch(function(e){t.$message({showClose:!0,message:e,type:"error"})})},fileDownload:function(t,e){var n=new Blob([t],{type:"application/octet-stream"}),a=e||"filename.xlsx";if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,a);else{var o=window.URL.createObjectURL(n),s=document.createElement("a");s.style.display="none",s.href=o,s.setAttribute("download",a),void 0===s.download&&s.setAttribute("target","_blank"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(o)}},getList:function(){var t=this;Object(a.a)(this.enter.sessionId).then(function(e){console.log(e),t.id=e.bussData.id,t.isShowRank="y"==e.bussData.isShowRank})},init:function(){var t=this,e={pageIndex:this.data.currentPage,pageSize:this.data.pageSize,monthDaysASC:!0,monthDaysDESC:!0,monthMouthASC:!0,monthMouthDESC:!0};Object(a.d)(e,this.enter.sessionId).then(function(e){console.log(e),t.tableData=e.bussData,t.total=e.count,t.totalsPage=e.pageCount})},godanDetail:function(t,e){this.$router.push({path:"/user/danweiList/detail",query:{weixinUserId:e.weixinUserId}})},handleSizeChange:function(t){this.data.pageSize=t,this.init()},handleCurrentChange:function(t){this.data.currentPage=t,this.init()}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"w-100 h-100 p-15"},[n("el-breadcrumb",{staticClass:"p-15 b-b-f0",attrs:{separator:"/","separator-class":"el-icon-arrow-right"}},[n("el-button",{staticClass:"right",attrs:{size:"mini"},on:{click:t.exportExcel}},[t._v("导出数据")]),t._v(" "),n("el-breadcrumb-item",[t._v("排行榜")])],1),t._v(" "),n("div",{staticClass:"w-100 p-15 mainTop"},[t._v("\n\t\t\t\t是否在APP显示\n\t\t\t\t"),n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc"},on:{change:t.change},model:{value:t.isShowRank,callback:function(e){t.isShowRank=e},expression:"isShowRank"}})],1),t._v(" "),n("el-table",{staticClass:"w-100 p-15",attrs:{data:t.tableData,stripe:"","default-sort":{prop:"monthMouth",order:"descending"}}},[n("el-table-column",{attrs:{label:"排名",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(e.$index+1)+"\n\t\t\t\t\t")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"昵称",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(e.row.nickname)+"\n\t\t\t\t\t")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"设备",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(e.row.model)+"\n\t\t\t\t\t")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"当月吸烟口数",width:"180",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(e.row.monthMouth)+"\n\t\t\t\t\t")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"当月活跃天数",width:"180",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(e.row.monthDays)+"\n\t\t\t\t\t")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"设备激活日期",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(e.row.startTime)+"\n\t\t\t\t\t")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticClass:"elbut",attrs:{size:"mini",plain:""},on:{click:function(n){return t.godanDetail(e.$index,e.row)}}},[t._v("详情")])]}}])})],1),t._v(" "),n("div",{staticClass:"text-center p-t-30"},[n("el-pagination",{attrs:{"current-page":t.data.currentPage,"page-sizes":[10,20,30,40],"page-size":t.data.pageSize,layout:"total,slot, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[n("span",[t._v("第"+t._s(t.data.currentPage)+" / "+t._s(t.totalsPage)+"页")])])],1)],1)])},staticRenderFns:[]};var i=n("VU/8")(o,s,!1,function(t){n("vHTV")},"data-v-3cdadd82",null);e.default=i.exports},vHTV:function(t,e){}});
//# sourceMappingURL=8.097dd7bf11334dda1ced.js.map