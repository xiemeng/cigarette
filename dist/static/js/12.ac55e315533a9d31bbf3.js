webpackJsonp([12],{"63Zb":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("2Wsv"),i=a("mw3O"),s=a.n(i);var o={name:"message",components:{},data:function(){return{dialogFormVisible:!1,total:0,totalsPage:0,data:{pageSize:10,currentPage:1},enter:{},tableData:[],form:{command:"",name:"",id:""},title:"新增",formLabelWidth:"40px"}},created:function(){},mounted:function(){this.enter=JSON.parse(localStorage.getItem("enter")),this.init()},methods:{init:function(){var t,e,a=this,i={pageIndex:this.data.currentPage,pageSize:this.data.pageSize,isVisible:"y"};(t=i,e=this.enter.sessionId,Object(n.a)({url:"/admin/ectype/find_page",method:"post",data:t,headers:{sessionId:e}})).then(function(t){console.log(t),a.tableData=t.bussData,a.total=t.count,a.totalsPage=t.pageCount})},toLink:function(t){this.$router.push({path:t})},handleDelete:function(t,e){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var t,i,o={id:e.id};(t=o,i=a.enter.sessionId,Object(n.a)({url:"/admin/ectype/delete?"+s.a.stringify(t),method:"post",headers:{sessionId:i}})).then(function(t){console.log(t),t&&0==t.bussData?a.$message({type:"warning",message:"该烟型被引用，不能删除!"}):(a.$message({type:"success",message:"删除成功!"}),a.init())})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},goAdd:function(t,e){var a="add"==t?"新增":"编辑";this.title=a;e?(this.form.name=e.name,this.form.command=e.command,this.form.id=e.id):(this.form.name="",this.form.command=""),this.dialogFormVisible=!0},chooseis:function(t){""!=this.form.command?""!=this.form.name?"新增"==this.title?this.addType():this.undate():this.$message({message:"请填写烟型",type:"warning"}):this.$message({message:"请填写命令",type:"warning"})},addType:function(t){var e,a,i=this,s={name:this.form.name,command:this.form.command};(e=s,a=this.enter.sessionId,Object(n.a)({url:"/admin/ectype/insert",method:"post",data:e,headers:{sessionId:a}})).then(function(t){console.log(t),i.init(),i.dialogFormVisible=!1,i.$message({type:"success",message:"您新增的烟型是: "+i.form.name})})},undate:function(t){var e,a,i=this,s={name:this.form.name,command:this.form.command,id:this.form.id};(e=s,a=this.enter.sessionId,Object(n.a)({url:"/admin/ectype/update",method:"post",data:e,headers:{sessionId:a}})).then(function(t){console.log(t),i.init(),i.dialogFormVisible=!1,i.$message({type:"success",message:"修改成功"})})},exportList:function(){var t,e=this;(t=this.enter.sessionId,Object(n.a)({url:"/admin/ectype/exportList",method:"post",responseType:"arraybuffer",headers:{sessionId:t}})).then(function(t){console.log(t);e.fileDownload(t,"烟型管理列表.xlsx")})},handleSizeChange:function(t){this.data.pageSize=t,this.init()},handleCurrentChange:function(t){this.data.currentPage=t,this.init()},fileDownload:function(t,e){var a=new Blob([t],{type:"application/octet-stream"}),n=e||"filename.xlsx";if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,n);else{var i=window.URL.createObjectURL(a),s=document.createElement("a");s.style.display="none",s.href=i,s.setAttribute("download",n),void 0===s.download&&s.setAttribute("target","_blank"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)}}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"w-100 h-100 p-15"},[a("el-breadcrumb",{staticClass:"p-15 b-b-f0",attrs:{separator:"/","separator-class":"el-icon-arrow-right"}},[a("el-button",{staticClass:"right",attrs:{size:"mini"},on:{click:function(e){return t.exportList("columnAdd")}}},[t._v("导出数据")]),t._v(" "),a("el-button",{staticClass:"elbut right",attrs:{size:"mini"},on:{click:function(e){return t.goAdd("add")}}},[t._v("新增")]),t._v(" "),a("el-breadcrumb-item",[t._v("烟型管理")])],1),t._v(" "),a("el-table",{staticClass:"w-100 p-15",attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"序号",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(e.$index+1)+"\n\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"命令",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(e.row.command)+"\n\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"烟型",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(e.row.name)+"\n\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"elbut",attrs:{size:"mini",plain:""},on:{click:function(a){return t.goAdd(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"text-center p-t-30"},[a("el-pagination",{attrs:{"current-page":t.data.currentPage,"page-sizes":[10,20,30,40],"page-size":t.data.pageSize,layout:"total,slot, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("span",[t._v("第"+t._s(t.data.currentPage)+" / "+t._s(t.totalsPage)+"页")])])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"命令","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.command,callback:function(e){t.$set(t.form,"command",e)},expression:"form.command"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"烟型","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.chooseis}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("HpUH")},"data-v-3c484780",null);e.default=l.exports},HpUH:function(t,e){}});
//# sourceMappingURL=12.ac55e315533a9d31bbf3.js.map