webpackJsonp([12],{"63Zb":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("2Wsv"),s=n("CtzY"),i=n.n(s);var o={name:"message",components:{},data:function(){return{total:0,totalsPage:0,data:{pageSize:10,currentPage:1},enter:{},tableData:[]}},created:function(){},mounted:function(){this.enter=JSON.parse(localStorage.getItem("enter")),this.init()},methods:{init:function(){var t,e,n=this,s={pageIndex:this.data.currentPage,pageSize:this.data.pageSize,isVisible:"y"};(t=s,e=this.enter.sessionId,Object(a.a)({url:"/admin/ectype/find_page",method:"post",data:t,headers:{sessionId:e}})).then(function(t){console.log(t),n.tableData=t.bussData,n.total=t.count,n.totalsPage=t.pageCount})},toLink:function(t){this.$router.push({path:t})},handleDelete:function(t,e){var n=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var t,s,o={id:e.id};(t=o,s=n.enter.sessionId,Object(a.a)({url:"/admin/ectype/delete?"+i.a.stringify(t),method:"post",headers:{sessionId:s}})).then(function(t){console.log(t),n.$message({type:"success",message:"删除成功!"}),n.init()})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},goAdd:function(t,e){var n=this,a="add"==t?"新增":"编辑",s="";e&&(s=e.name),console.log(e),this.$prompt("烟型",a,{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:s,closeOnClickModal:!1}).then(function(a){var s=a.value;s?"add"==t?n.addType(e,s):n.undate(e,s):n.$message({type:"error",message:"请输入烟型"})}).catch(function(){})},addType:function(t,e){var n,s,i=this;(n={name:e},s=this.enter.sessionId,Object(a.a)({url:"/admin/ectype/insert",method:"post",data:n,headers:{sessionId:s}})).then(function(t){console.log(t),i.init(),i.$message({type:"success",message:"您新增的烟型是: "+e})})},undate:function(t,e){var n,s,i=this,o={name:e,id:t.id};(n=o,s=this.enter.sessionId,Object(a.a)({url:"/admin/ectype/update",method:"post",data:n,headers:{sessionId:s}})).then(function(t){console.log(t),i.init(),i.$message({type:"success",message:"修改成功"})})},exportList:function(){var t=this;Object(a.a)({url:"/admin/ectype/exportList",method:"post",responseType:"arraybuffer"}).then(function(e){console.log(e);t.fileDownload(e,"烟型管理列表.xlsx")})},handleSizeChange:function(t){this.data.pageSize=t,this.init()},handleCurrentChange:function(t){this.data.currentPage=t,this.init()},fileDownload:function(t,e){var n=new Blob([t],{type:"application/octet-stream"}),a=e||"filename.xlsx";if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,a);else{var s=window.URL.createObjectURL(n),i=document.createElement("a");i.style.display="none",i.href=s,i.setAttribute("download",a),void 0===i.download&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"w-100 h-100 p-15"},[n("el-breadcrumb",{staticClass:"p-15 b-b-f0",attrs:{separator:"/","separator-class":"el-icon-arrow-right"}},[n("el-button",{staticClass:"right",attrs:{size:"mini"},on:{click:function(e){return t.exportList("columnAdd")}}},[t._v("导出数据")]),t._v(" "),n("el-button",{staticClass:"elbut right",attrs:{size:"mini"},on:{click:function(e){return t.goAdd("add")}}},[t._v("新增")]),t._v(" "),n("el-breadcrumb-item",[t._v("烟型管理")])],1),t._v(" "),n("el-table",{staticClass:"w-100 p-15",attrs:{data:t.tableData,stripe:""}},[n("el-table-column",{attrs:{label:"序号",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(e.$index+1)+"\n\t\t\t\t\t")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"烟型",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(e.row.name)+"\n\t\t\t\t\t")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticClass:"elbut",attrs:{size:"mini",plain:""},on:{click:function(n){return t.goAdd(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("div",{staticClass:"text-center p-t-30"},[n("el-pagination",{attrs:{"current-page":t.data.currentPage,"page-sizes":[10,20,30,40],"page-size":t.data.pageSize,layout:"total,slot, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[n("span",[t._v("第"+t._s(t.data.currentPage)+" / "+t._s(t.totalsPage)+"页")])])],1)],1)])},staticRenderFns:[]};var c=n("C7Lr")(o,r,!1,function(t){n("9c74")},"data-v-3de14414",null);e.default=c.exports},"9c74":function(t,e){}});
//# sourceMappingURL=12.37f81f04f0eda80e6bbc.js.map